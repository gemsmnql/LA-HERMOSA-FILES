<div class="flex justify-between items-center p-8 bg-white shadow-sm">
  <h1 class="header-admin text-[#6F0E35] text-3xl font-bold font-serif">La Hermosa Admin</h1>
  <div class="flex gap-4">
    <button (click)="isModalOpen = true" class="add-btn bg-[#6F0E35] text-white px-6 py-2 rounded-full hover:opacity-90 transition-opacity">
      + Add New Blog
    </button>
    <button (click)="onLogout()" class="logout-btn border border-[#6F0E35] text-[#6F0E35] px-4 py-2 rounded-full hover:bg-pink-50 transition-colors">
      Logout
    </button>
  </div>
</div>

<div *ngIf="isModalOpen" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end justify-center z-50 p-4 pb-10">
  <div class="bg-white rounded-[40px] w-full max-w-2xl shadow-2xl relative animate-in slide-in-from-bottom-10 duration-300 flex flex-col max-h-[80vh]">
    <div class="px-8 py-6 flex items-center justify-between border-b border-gray-100 bg-white rounded-t-[40px] shrink-0">
      <h2 class="text-2xl font-bold text-[#6F0E35]">Magazine Style Post</h2>
      <button (click)="isModalOpen = false" class="text-gray-400 hover:text-black transition-colors p-2">
        <i class="fa-solid fa-xmark text-2xl"></i>
      </button>
    </div>

    <div class="p-8 pt-6 overflow-y-auto custom-scrollbar">
      <form (ngSubmit)="onPostBlog()" class="flex flex-col gap-6">
        <div>
          <label class="text-xs font-bold text-gray-400 uppercase ml-2">Main Title</label>
          <input type="text" name="title" [(ngModel)]="blogData.title" placeholder="Main Blog Title"
                 class="w-full p-4 border rounded-2xl focus:ring-2 focus:ring-[#6F0E35] outline-none font-bold text-lg" required>
        </div>

        <div>
          <label class="text-xs font-bold text-gray-400 uppercase ml-2">Author Name</label>
          <input type="text" name="author" [(ngModel)]="blogData.author" placeholder="Enter Author (e.g. Jane Doe)"
                class="w-full p-4 border rounded-2xl focus:ring-2 focus:ring-[#6F0E35] outline-none text-md">
        </div>
        
        <div class="p-4 bg-gray-50 rounded-2xl border border-gray-100">
          <p class="text-sm font-bold text-gray-700 mb-2">Cover Image URL</p>
          <input type="text" name="imageUrl" [(ngModel)]="blogData.imageUrl" placeholder="Paste main cover link here..."
                 class="w-full p-3 border rounded-xl text-sm focus:ring-2 focus:ring-[#6F0E35] outline-none mb-3">
          <img *ngIf="blogData.imageUrl" [src]="blogData.imageUrl" class="h-40 w-full object-cover rounded-xl border shadow-sm mb-3"
               onerror="this.src='https://placehold.co/400x200?text=Invalid+Image+URL'">
          <input type="text" name="altText" [(ngModel)]="blogData.altText" placeholder="Alt Text (SEO Description)"
                 class="w-full p-2 border rounded-lg text-xs italic focus:ring-1 focus:ring-[#6F0E35] outline-none">
        </div>

        <div class="bg-pink-50/30 p-4 rounded-2xl border border-pink-100">
          <label class="text-xs font-bold text-pink-700 uppercase ml-1">Section 1 Header</label>
          <input type="text" name="header1" [(ngModel)]="blogData.header1" placeholder="First Sub-header"
                 class="w-full p-3 mb-3 border rounded-xl font-semibold text-[#6F0E35]">
          <textarea name="content" [(ngModel)]="blogData.content" placeholder="First paragraph text..." rows="4"
                    class="w-full p-3 border rounded-xl outline-none text-sm"></textarea>
        </div>

        <div class="p-4 bg-amber-50/30 rounded-2xl border border-amber-100">
          <p class="text-sm font-bold text-amber-800 mb-2">Secondary Image URL</p>
          <input type="text" name="imageUrl2" [(ngModel)]="blogData.imageUrl2" placeholder="Paste second image link here..."
                 class="w-full p-3 border rounded-xl text-sm focus:ring-2 focus:ring-amber-400 outline-none mb-3">
          <img *ngIf="blogData.imageUrl2" [src]="blogData.imageUrl2" class="h-40 w-full object-cover rounded-xl border shadow-sm mb-3"
               onerror="this.src='https://placehold.co/400x200?text=Invalid+Image+URL'">
          <input type="text" name="altText2" [(ngModel)]="blogData.altText2" placeholder="Alt Text 2 (SEO Description)"
                 class="w-full p-2 border rounded-lg text-xs italic focus:ring-1 focus:ring-amber-400 outline-none">
        </div>

        <div class="bg-gray-50/50 p-4 rounded-2xl border border-gray-100">
          <label class="text-xs font-bold text-gray-500 uppercase ml-1">Section 2 Header</label>
          <input type="text" name="header2" [(ngModel)]="blogData.header2" placeholder="Second Sub-header"
                 class="w-full p-3 mb-3 border rounded-xl font-semibold text-[#6F0E35]">
          <textarea name="content2" [(ngModel)]="blogData.content2" placeholder="Second paragraph text..." rows="4"
                    class="w-full p-3 border rounded-xl outline-none text-sm"></textarea>
        </div>

        <div class="flex flex-col gap-4 mb-4">
          <div class="bg-gray-50 p-4 rounded-2xl border border-gray-100 flex items-center justify-between w-full">
            <p class="text-sm font-bold text-gray-700">Feature this post?</p>
            <div class="flex gap-4 items-center">
              <label class="flex items-center gap-2 cursor-pointer text-sm">
                <input type="radio" name="isFeatured" [value]="true" [(ngModel)]="blogData.isFeatured" class="accent-[#6F0E35]"> Yes
              </label>
              <label class="flex items-center gap-2 cursor-pointer text-sm">
                <input type="radio" name="isFeatured" [value]="false" [(ngModel)]="blogData.isFeatured" class="accent-gray-400"> No
              </label>
            </div>
          </div>
          <button type="submit" [disabled]="isLoading" class="w-full bg-[#6F0E35] text-white py-5 rounded-2xl font-bold text-lg hover:shadow-lg transition active:scale-95 disabled:bg-gray-300">
            <span *ngIf="!isLoading">Publish Magazine Post</span>
            <span *ngIf="isLoading" class="flex items-center justify-center gap-2">
              <i class="fa-solid fa-circle-notch animate-spin"></i> Processing...
            </span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="max-w-4xl mx-auto mt-12 px-6 pb-20">
  <h2 class="text-xl font-bold mb-6 text-gray-800">Existing Stories</h2>
  <div *ngIf="isLoading && allBlogs.length === 0" class="flex flex-col items-center justify-center py-20">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[#6F0E35]"></div>
    <p class="text-[#6F0E35] mt-4 font-serif italic">Updating your library...</p>
  </div>
  <div *ngIf="allBlogs.length > 0" class="grid gap-4 animate-in fade-in duration-500">
    <div *ngFor="let blog of allBlogs" class="flex justify-between items-center p-4 bg-white rounded-2xl border border-gray-100 hover:shadow-md transition">
        <div class="flex items-center gap-4">
            <img [src]="blog.imageUrl" [alt]="blog.altText || ''" class="w-16 h-16 object-cover rounded-xl shadow-sm" onerror="this.src='https://placehold.co/100x100?text=No+Image'">
            <div>
              <span class="font-bold text-gray-800 block leading-tight">{{ blog.title }}</span>
              <span *ngIf="blog.isFeatured" class="text-[10px] bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-bold uppercase mt-1 inline-block">Featured</span>
            </div>
        </div>
        <button (click)="deleteBlog(blog._id)" class="text-gray-300 hover:text-red-600 p-3 rounded-xl hover:bg-red-50 transition-all">
            <i class="fa-regular fa-trash-can text-xl"></i>
        </button>
    </div>
  </div>
</div>
